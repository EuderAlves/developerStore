<div class="register-container">
    <mat-card>
        <mat-card-title>Cadastrar Novo Usuário</mat-card-title>
        <mat-card-content>
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                <mat-form-field appearance="fill" class="full-width">
                    <mat-label>Nome*</mat-label>
                    <input matInput formControlName="name" required />
                    <mat-error *ngIf="registerForm.get('name')?.invalid">Nome é obrigatório</mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="full-width">
                    <mat-label>Email*</mat-label>
                    <input matInput formControlName="email" required />
                    <mat-error *ngIf="registerForm.get('email')?.invalid">Email inválido</mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="full-width">
                    <mat-label>Senha*</mat-label>
                    <input matInput type="password" formControlName="passwordHash" required
                        [type]="hidePassword ? 'password' : 'text'" />
                    <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
                        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                    <mat-error *ngIf="registerForm.get('password')?.invalid">Senha é obrigatória</mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="full-width">
                    <mat-label>Confirmar Senha*</mat-label>
                    <input matInput type="password" formControlName="confirmPassword" required
                        [type]="hideConfirmPassword ? 'password' : 'text'" />
                    <button mat-icon-button matSuffix (click)="hideConfirmPassword = !hideConfirmPassword"
                        type="button">
                        <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                    <mat-error *ngIf="registerForm.hasError('passwordMismatch')">As senhas não correspondem</mat-error>
                    <mat-error *ngIf="registerForm.get('confirmPassword')?.invalid">Confirmar senha é
                        obrigatório</mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="full-width">
                    <mat-label>Nome da Empresa*</mat-label>
                    <input matInput formControlName="companyName" required />
                    <mat-error *ngIf="registerForm.get('companyName')?.invalid">Nome da empresa é
                        obrigatório</mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="full-width">
                    <mat-label>Tipo de Usuário*</mat-label>
                    <mat-select formControlName="userType" required>
                        <mat-option [value]="1">Administrador</mat-option>
                        <mat-option [value]="0">Cliente</mat-option>
                    </mat-select>
                    <mat-error *ngIf="registerForm.get('userType')?.invalid">Tipo de usuário é obrigatório</mat-error>
                </mat-form-field>

                <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>

                <div class="button-container">
                    <button mat-raised-button color="warn" (click)="cancel()">Cancelar</button>
                    <button mat-raised-button color="primary" type="submit"
                        [disabled]="registerForm.invalid">Cadastrar</button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>